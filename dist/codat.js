"use strict";var classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),request=require("request-promise"),btoa=require("btoa"),constants={COMPANIES:"companies",UAT:"uat",PRODUCTION:"production",datasets:{BALANCE_SHEET:"financials/balanceSheet",BILLS:"bills",CHART_OF_ACCOUNTS:"accounts",CREDIT_NOTES:"creditNotes",CUSTOMERS:"customers",INVOICES:"invoices",PAYMENTS:"payments",PROFIT_AND_LOSS:"financials/profitAndLoss",SUPPLIERS:"suppliers",BANK_STATEMENTS:"bankStatements",COMPANY:"info"},refresh:{ALL:"all",QUEUE:"queue"}};exports.constants=constants;var Api=function(){function t(e,n){classCallCheck(this,t),this.__baseUrl=e,this.__apiKey=n}return createClass(t,[{key:"get",value:function(t,e){return request(this.__baseRequest(t,e,"GET"))}},{key:"post",value:function(t,e,n){return request(this.__baseRequest(t,e,"POST",n))}},{key:"put",value:function(t,e,n){return request(this.__baseRequest(t,e,"PUT",n))}},{key:"delete",value:function(t,e){return request(this.__baseRequest(t,e,"DELETE"))}},{key:"__baseRequest",value:function(t,e,n,a){return{baseUrl:this.__baseUrl,uri:t,qs:e,json:!0,headers:{Authorization:"Basic "+btoa(this.__apiKey)},method:n,body:a}}}]),t}(),AddCompany=function t(e,n){classCallCheck(this,t),this.name=e,this.platformType=n};exports.AddCompany=AddCompany;var UpdateCompanySettings=function t(e){classCallCheck(this,t),this.offlineConnectorInstall=e};exports.UpdateCompanySettings=UpdateCompanySettings;var CodatApiClient=function(){function t(e,n){classCallCheck(this,t),this.baseUrl=e,this.apiKey=n,this.companiesApi=new Api(e,n)}return createClass(t,[{key:"__companiesBaseUrl",value:function(t){return constants.COMPANIES+"/"+t}},{key:"getCompanies",value:function(){return this.companiesApi.get(constants.COMPANIES)}},{key:"addCompany",value:function(t,e){return this.companiesApi.post(constants.COMPANIES,null,t instanceof AddCompany?t:new AddCompany(t,e))}},{key:"getCompany",value:function(t){return this.companiesApi.get(this.__companiesBaseUrl(t))}},{key:"updateCompany",value:function(t,e){return this.companiesApi.put(this.__companiesBaseUrl(t),null,e)}},{key:"removeCompany",value:function(t){return this.companiesApi.delete(this.__companiesBaseUrl(t))}},{key:"getCompanySettings",value:function(t){return this.companiesApi.get(this.__companiesBaseUrl(t)+"/settings")}},{key:"updateCompanySettings",value:function(t,e){return this.companiesApi.put(this.__companiesBaseUrl(t)+"/settings",null,t instanceof UpdateCompanySettings?t:new UpdateCompanySettings(e))}},{key:"getCompanyDataStatus",value:function(t){return this.companiesApi.get(this.__companiesBaseUrl(t)+"/dataStatus")}},{key:"companyDataClient",value:function(t){return new Api(this.baseUrl+"/"+this.__companiesBaseUrl(t)+"/data",this.apiKey)}}]),t}(),uat=function(t){return new CodatApiClient("https://api-uat.codat.io",t)};exports.uat=uat;var production=function(t){return new CodatApiClient("https://api.codat.io",t)};exports.production=production,exports.apiClient=function(t){switch(t){case constants.UAT:return uat;case constants.PRODUCTION:return production}};
